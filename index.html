<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>राधे Counter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        h1 {
            font-size: 100px;
            color: green;
        }
        h2 {
            margin-left: 40px;
            font-size: 70px;
            color: blue;
            text-decoration: underline;
        }
        button {
            padding: 30px 50px;
            font-size: 50px;
            cursor: pointer;
            border: 2px solid red;
            border-radius: 50px;
        }
        #toggleBtn{
            background-color: red;
            color: white;
        }
        ul {
            margin-top: 30px;
            font-size: 50px;
            list-style-type: none;
            padding: 0;
        }
        li {
            margin: 5px 0;
        }
    </style>
</head>
<body>

    <h1>राधे-कृष्णा Count: <span id="countDisplay">0</span></h1>
    <button id="toggleBtn">▶Start Listening</button>
    
    <h2>Save Data</h2>
    <ul id="toList"></ul>

    <script>
    let count = 0;
    let isListening = false;

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
        alert("Your browser does not support Speech Recognition.");
    }
    const recognition = new SpeechRecognition();
    recognition.lang = "hi-IN";
    recognition.continuous = true;
    recognition.interimResults = false;

    const toggleBtn = document.getElementById("toggleBtn");

    toggleBtn.onclick = () => {
        if (!isListening) {
            // Start listening
            count = 0;
            document.getElementById("countDisplay").textContent = count;
            recognition.start();
            isListening = true;
            toggleBtn.textContent = "⏸ Pause Listening";
            console.log("Listening for 'राधे'...");
        } else {
            // Stop listening
            recognition.stop();
            isListening = false;
            toggleBtn.textContent = "▶ Start Listening";

            // सिर्फ तब Save करो जब count > 0 हो
            if (count > 0) {
                const li = document.createElement("li");
                li.textContent = "राधे कृष्णा count: " + count;
                document.getElementById("toList").appendChild(li);
            }
        }
    };

    recognition.onresult = function(event) {
        const transcript = event.results[event.results.length - 1][0].transcript.trim();
        console.log("Heard:", transcript);

        if (transcript.includes("राधे")) {
            let matches = transcript.match(/राधे/g);
            if (matches) {
                count += matches.length;
                document.getElementById("countDisplay").textContent = count;
            }
        }
    };

    recognition.onerror = function(event) {
        console.error("Error:", event.error);
        isListening = false;
        toggleBtn.textContent = "▶ Start Listening";
    };
    </script>

</body>
</html>
